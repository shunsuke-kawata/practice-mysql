# SQL・データベースまとめ

## 単語

| 名前 | 説明 |
| -- | -- |
| テーブル | データベースの種類ごとの単位, エクセルでいうシートのようなイメージ |
| レコード | テーブルに存在するデータそのもの, エクセルでいう行のようなイメージ |
| カラム | テーブルに存在するレコードの属性, エクセルでいう列のようなイメージ |
| フィールド | テーブルに存在するデータの最小単位, エクセルでいうセルのようなイメージ |
| RDB(リレーショナルデータベース) | 関連する複数のテーブルから構成されるデータベース |
| RDBMS(リレーショナルデータベースマネジメントシステム) | RDBを管理するシステム |
| SQL | データベースを操作する言語 |
| クエリ | データベースに対してSQLで要求する挿入や抽出,削除などの命令 |


## SQLで行うこと

- RDBMS(DBMS)に対してSQLで作成したクエリを送信してデータベースからデータの作成・抽出・更新・削除などを行う

## SQLでの比較演算子
| 演算子 | 意味 | 補足 |
| -- | -- | -- |
| = | 等しい | 一般的なプログラミング言語では```==```が多いが```=```を使用する |
| > | より大きい |  |
| < | より小さい |  |
| >= | 以上 |  |
| <= | 以下 |  |
| != | 等しくない |  |
| AND | 2つの条件のうち,両方がTRUE |  |
| OR | 2つの条件のうち,少なくともどちらか一方はTRUE |  |
| NOT | 式の結果を反転する | IN句などと一緒に使うことが多い |
| IN | 対象のフィールドが式一覧の中のどれかに一致する | OR句でも実現できるが対象が多く煩雑になる時などに使用する |
| LIKE | 対象のフィールドがパターンに一致する | 文字列の部分一致検索などに使用する |

### LIKEのパターンについて

- システムや環境によってシングルクォテーションの場合とダブルクォテーションの場合がある

#### 使用するワイルドカード

- %	:任意の長さ（ゼロを含む）の文字列
- _	:任意の１文字
#### 例:aという文字に関する検索

| 記法 | 検索結果 | 補足 |
| -- | -- | -- |
| 'a%' | aから始まる文字列パターンを検索 | aの前に0文字,aの後に0文字以上の任意の文字 |
| '%a' | aで終わる文字列パターンを検索 | aの前に0文字以上の任意の文字,aの後に0文字 |
| '%a%' | aを含む文字列パターンを検索 | aの前に0文字以上の任意の文字,aの後に0文字以上の任意の文字 |
| '% _ a _%' | aを含み前後に文字の存在する文字列パターンを検索 | aの前に1文字以上の任意の文字,aの後に1文字以上の任意の文字 |

#### 例:文字数に関する検索
| 記法 | 検索結果 | 補足 |
| -- | -- | -- |
| '_' | 1文字の文字列パターンを検索 |  |
| '_%' | 1文字以上の文字列パターンを検索 | %, _の順番はどちらでも一緒 |

##### n文字以下の文字列を検索したいときは NOT LIKE でn+1未満の文字列を検索することで実現できる 

## 基本構文 （SELECT, INSERT, UPDATE, DELETE）
### SELECT データを取得する
- ```SELECT * FROM tablename;```: 指定したテーブルの内容を全て射影する
- ```SELECT columnname FROM tablename;```:射影するカラムを選択して指定したテーブルの内容を射影する
    - 複数のカラムを選択するときは```,```で区切る
- ```SELECT columnname FROM tablename WHERE (条件文);```:条件文を満たすレコードの内容を射影する

### INSERT データを追加する
- ```INSERT INTO tabelname VALUES (追加するレコードの値);```:指定したテーブルに新たなレコードを追加する
    - データの型が合っていない場合レコードの追加が失敗するのでテーブル定義を確認して実行する

### UPDATE データを更新する
- ```UPDATE tabelname SET colmnname = 値;```:指定したテーブルの全レコードの指定したカラムの値を更新する
    - 全てのレコードのデータを変更できるが使用場面はあまりない
- ```UPDATE tabelname SET colmnname = 値 WHERE (条件文);```:指定したテーブルのレコードのうち,条件文を満たすものの指定したカラムの値を更新する

### UPDATE データを削除する
- ```DELETE FROM  tabelname;```:指定したテーブルの全レコードを削除する
    - テーブルの内容が消えるため,注意して使用する
- ```DELETE FROM  tabelname WHERE (条件文);```:指定したテーブルのレコードのうち,条件文を満たすものを削除する